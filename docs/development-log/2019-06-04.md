# 2019-06-04

# 重构

1. 完全使用 Map 重构路由表；
2. 然后重构了设置路由和获取路由的方式，从 `Array.reduce` 变成了 `Array.forEach` ，我真是聪明 :laughing: 。

# 修复

1. 修复了路径格式化函数的一个小 bug ，举个例子：

   修复前: `/prefix/` => `/prefi`

   修复后: `/prefix/` => `/prefix`

   这是由于错误的正则表达式引发的，从 `replace(/.\/+$/, '')` 修复为了 `replace(/(.+)\/$/, '$1')`
2. 我看看今天的提交日志，好像没有了，啊哈！

# 新增

新增了前两天一直念叨的路径变量功能！我超级勇的！

先让我去把代码 commit 了，然后和 master merge 一下（这样 speak 好有香港范哦hhh）。

# 计划

实现这俩参数注解：

- `PARAM$PATH$QUERY`
- `PARAM$REQUEST$BODY`

查询字符串好说，有自带库可以用。但是请求体的解析，需要自己实现一个？但是那玩意是事件驱动的呀，不是同步的怎么办？

看来异步支持是必须的了（但是很影响效率唉）。
